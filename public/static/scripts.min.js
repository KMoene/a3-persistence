console['log']('Welcome\x20to\x20assignment\x202!');const a=document['getElementById']('entry-area'),b=document['getElementById']('view-area'),c=document['getElementById']('edit-area'),d=document['getElementById']('delete-area');function e(){b['style']['display']='none',c['style']['display']='none',a['style']['display']='none',d['style']['display']='none';}function f(q,r,s){console['log']('edit\x20'+q),e(),document['getElementById']('edit-mid')['value']=q,document['getElementById']('edit-message')['value']=s,c['style']['display']='block';}function g(q){console['log']('delete\x20'+q),e(),document['getElementById']('del-mid')['value']=q,d['style']['display']='block';}function h(){e(),a['style']['display']='block';}function i(){e(),b['style']['display']='block';}const j=function(q){q['preventDefault']();const r=document['getElementById']('message');let s={'message':r['value'],'action':'new'},t=JSON['stringify'](s);return fetch('/submit',{'method':'POST','headers':{'Accept':'application/json','Content-Type':'application/json'},'body':t})['then'](function(u){console['log'](u),document['getElementById']('newsub')['disabled']=!![],document['getElementById']('newsub')['textContent']='success!',setTimeout(function(){n(),document['getElementById']('message')['value']='',document['getElementById']('newsub')['disabled']=![],document['getElementById']('newsub')['textContent']='Submit';},0x64);}),![];},k=function(q){q['preventDefault']();const r=document['querySelector']('#del-mid');let s={'action':'delete','mid':r['value']},t=JSON['stringify'](s);return fetch('/submit',{'method':'POST','headers':{'Accept':'application/json','Content-Type':'application/json'},'body':t})['then'](function(u){console['log'](u),document['getElementById']('delcan')['disabled']=!![],document['getElementById']('delsub')['disabled']=!![],document['getElementById']('delsub')['textContent']='deleting...',setTimeout(function(){n(),i(),document['getElementById']('delcan')['disabled']=![],document['getElementById']('delsub')['disabled']=![],document['getElementById']('delsub')['innerHTML']='<i\x20class=\x22trash\x20alternate\x20icon\x22></i>\x20Delete';},0x64);}),![];},l=function(q){q['preventDefault']();const r=document['querySelector']('#edit-message'),s=document['querySelector']('#edit-mid');let t={'message':r['value'],'action':'edit','mid':s['value']},u=JSON['stringify'](t);return fetch('/submit',{'method':'POST','headers':{'Accept':'application/json','Content-Type':'application/json'},'body':u})['then'](function(v){console['log'](v),document['getElementById']('editcan')['disabled']=!![],document['getElementById']('editsub')['disabled']=!![],document['getElementById']('editsub')['textContent']='editing...',setTimeout(function(){n(),i(),document['getElementById']('editcan')['disabled']=![],document['getElementById']('editsub')['disabled']=![],document['getElementById']('editsub')['textContent']='Submit';},0x64);}),![];},m=function(q){return q['preventDefault'](),i(),![];};function n(q){let r=document['getElementById']('username')['textContent']['replace'](/(\r\n|\n|\r)/gm,'');const s=document['getElementById']('msglist');fetch('/getmsg',{'method':'GET'})['then'](t=>t['json']())['then'](t=>{s['innerHTML']='';let u=0x0;t['forEach'](v=>{u+=v['wordcount'],v['name']==r?s['innerHTML']+=v['name']+'\x20said:\x20'+v['message']+'\x20\x20\x20<a\x20href=\x22#\x22\x20onclick=\x22editMsg('+v['mid']+',\x27'+v['name']+'\x27,\x27'+v['message']+'\x27)\x22>Edit</a>\x20<a\x20href=\x22#\x22\x20onclick=\x22deleteMsg('+v['mid']+')\x22>Delete</a><br/>':s['innerHTML']+=v['name']+'\x20said:\x20'+v['message']+'<br/>';});});}function o(q,r=0x12c){return Promise['race']([fetch(q),new Promise((s,t)=>setTimeout(()=>t(new Error('timeout')),r))]);}function p(){const q=document['getElementById']('serv-conn');o('/ping',0x514)['then'](r=>{q['textContent']='✓\x20Server\x20Online',q['style']['fontSize']=0x8,q['style']['color']='#007700',n();})['catch'](r=>{console['error'](r),q['textContent']='✘\x20Server\x20Unreachable!',q['style']['color']='#ff0000';});}window['onload']=function(){a['style']['display']='block';const q=document['getElementById']('newsub');q['onclick']=j;const r=document['getElementById']('editsub');r['onclick']=l;const s=document['getElementById']('delsub');s['onclick']=k;const t=document['getElementById']('delcan');t['onclick']=m;const u=document['getElementById']('editcan');u['onclick']=m,n();};